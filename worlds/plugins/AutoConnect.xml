<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on 2009年 一月 28日 星期三, 下午 8:52 -->
<!-- MuClient version 4.37 -->

<!-- Plugin "AutoConnect" generated by Plugin Wizard -->

<muclient>
<plugin
   name="AutoConnect"
   author="spraydew"
   id="ae142e4c5581d5c1d92babfe"
   language="Lua"
   purpose="AutoConnect on disconnect"
   date_written="2009-01-28 20:51:54"
   requires="4.37"
   version="1.0"
   >
<description trim="y">
<![CDATA[
AutoConnect on disconnect
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Timers  -->

<timers>
  <timer name="conn" enabled="y" second="5.00" offset_second="0.00"    send_to="12"
active_closed="y" >
  <send>Connect()</send>

  </timer>
</timers>

<!--  Script  -->


<script>
<![CDATA[
function OnDisconnect() 
	local activeworld = nil
	
	for k, v in pairs (GetWorldList()) do 
		activeworld = GetWorld (v)
		info = activeworld: GetInfo(113)
		if info then
			break
		end
		activeworld = nil
	end
  Activate()
  EnableTimer("conn", true)
  
  if activeworld == nil then
    return
  end
	activeworld: Activate()
end
]]>
</script>


</muclient>
